<!DOCTYPE html>
<html>
<head>
  <title>PRTY AI</title>
  <style>
    body {
      background: #0b0b0b;
      color: white;
      font-family: Arial, sans-serif;
    }
    #chat {
      height: 300px;
      overflow-y: auto;
      border: 1px solid #333;
      padding: 10px;
      margin-bottom: 10px;
    }
    .user { color: #6cf; margin: 5px 0; }
    .ai { color: #f6c; margin: 5px 0; }
    input {
      width: 80%;
      padding: 10px;
      background: #111;
      color: white;
      border: 1px solid #333;
    }
    button {
      padding: 10px;
      background: #f6c;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h2>PRTY AI</h2>

<div id="chat"></div>

<input id="ai-input" placeholder="Say something..." />
<button onclick="sendMessage()">Send</button>

<script>
const input = document.getElementById("ai-input");
const chat = document.getElementById("chat");

function addMessage(cls, text) {
  const div = document.createElement("div");
  div.className = cls;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function sendMessage() {
  const msg = input.value.trim();
  if (!msg) return;

  addMessage("user", "You: " + msg);
  input.value = "";

  addMessage("ai", "PRTY AI: typingâ€¦");

  try {
    const res = await fetch("/api/ai", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: msg })
    });

    const data = await res.json();
    chat.lastChild.remove();
    addMessage("ai", "PRTY AI: " + data.reply);

  } catch {
    chat.lastChild.remove();
    addMessage("ai", "PRTY AI: tired rn ðŸ˜´");
  }
}

input.addEventListener("keydown", e => {
  if (e.key === "Enter") sendMessage();
});
</script>

</body>
</html>
